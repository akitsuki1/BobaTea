@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Tuyển Dụng";
}

<link rel="stylesheet" href="~/Content/css/Apply.css" />

<div class="apply">
    <div class="apply-banner">
        <img src="@Url.Content("~/Content/images/tuyendung.jpg")" alt="tuyendung" />
    </div>

    <div class="content apply1">
        <img src="@Url.Content("~/Content/images/apply_content.jpg")" alt="img apply" />
        <div class="text-apply">
            <h1>YẾU TỐ TRỞ THÀNH NHÂN VIÊN QUÁN</h1>
            <p>Có kỹ năng giao tiếp ở mức khá – tốt.</p>
            <p>Có kinh nghiệm trong ngành dịch vụ, khách sạn – nhà hàng là ưu thế.</p>
            <p>Khả năng giao tiếp ngoại ngữ là tiếng Anh ở mức cơ bản.</p>
            <p>Làm việc siêng năng, đi làm đúng giờ và đều đặn.</p>
            <p>Có sức khỏe tốt và có thể làm việc trong môi trường áp lực.</p>
        </div>
    </div>

    <div class="content apply2">
        <div class="form-apply">
            <h2>ĐĂNG KÍ ỨNG TUYỂN</h2>

            <!-- Thông báo sẽ hiển thị ở đây -->
            <div id="apply-message" style="display:none;" class="alert alert-success"></div>

            <form id="applyForm" enctype="multipart/form-data">
                <div class="form-group">
                    <label for="name">Họ và tên:</label>
                    <input type="text" id="name" name="name" placeholder="Nhập họ và tên" required />
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" placeholder="Nhập email" required />
                </div>
                <div class="form-group">
                    <label for="phone">Số điện thoại:</label>
                    <input type="tel" id="phone" name="phone" placeholder="Nhập số điện thoại" required />
                </div>
                <div class="form-group">
                    <label for="position">Vị trí ứng tuyển:</label>
                    <select id="position" name="position" required>
                        <option value="">---Chọn vị trí---</option>
                        <option value="barista">Barista</option>
                        <option value="phucvu">Phục vụ</option>
                        <option value="quanly">Quản lý</option>
                        <option value="thungan">Thu ngân</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="message">Giới thiệu bản thân:</label>
                    <textarea id="message" name="message" rows="4" placeholder="Giới thiệu về bản thân"></textarea>
                </div>
                <div class="form-group">
                    <label for="cv">Tải lên CV (PDF hoặc DOCX):</label>
                    <input type="file" id="cv" name="cv" accept=".pdf,.doc,.docx" />
                </div>
                <button type="submit" class="btn-apply">Gửi đăng kí</button>
            </form>
        </div>
    </div>

    <div class="content apply3">
        <!-- Giữ nguyên phần lợi ích -->
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    $(document).ready(function () {
        $("#applyForm").on("submit", function (e) {
            e.preventDefault();

            var formData = new FormData(this);

            $.ajax({
                url: "/Apply/SubmitForm",
                type: "POST",
                data: formData,
                processData: false,
                contentType: false,
                success: function (res) {
                    if (res.success) {
                        $("#apply-message")
                            .removeClass("alert-danger")
                            .addClass("alert-success")
                            .text(res.msg)
                            .fadeIn();

                        $("#applyForm")[0].reset();

                        // Sau 3 giây thì tự động fadeOut
                        setTimeout(function () {
                            $("#apply-message").fadeOut();
                        }, 3000);
                    } else {
                        $("#apply-message")
                            .removeClass("alert-success")
                            .addClass("alert-danger")
                            .text(res.msg)
                            .fadeIn();

                        setTimeout(function () {
                            $("#apply-message").fadeOut();
                        }, 3000);
                    }
                },
                error: function () {
                    $("#apply-message")
                        .removeClass("alert-success")
                        .addClass("alert-danger")
                        .text("⚠️ Lỗi khi gửi yêu cầu tới server!")
                        .fadeIn();

                    setTimeout(function () {
                        $("#apply-message").fadeOut();
                    }, 3000);
                }
            });
        });
    });
</script>
